(()=>{"use strict";const t=document.getElementById("root");new class{constructor(t){if(this.responseAll,this.rootBox=document.body.querySelector("#root"),!(t instanceof HTMLElement))throw new Error("This is not HTML element!");this.container=t}init(){this.loader(),this.addTikkets()}loader(){document.addEventListener("DOMContentLoaded",(async t=>{t.preventDefault();const e=await fetch("http://localhost:7070/?method=allTickets",{method:"GET"});this.responseAll=await e.json();for(const t of this.responseAll)this.addTikket(this.rootBox,t.id,t.name,t.description,t.status)}))}addTikket(t,e,n,a,s){const d=document.createElement("div");d.classList.add("tikket_box"),d.dataset.id=`${e}`;const c=document.createElement("button");c.classList.add("btn_performance");const i=document.createElement("img");i.classList.add("perfomans_img"),i.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAACuklEQVR4nO2WXW/SUBjH+wkUTHQSE1+gUOiXkQtseLkZaHaviRsdL6VceOGMCa7ZhaIx+gVMvJABgwEF/By6b3GOOeY5XWGajZ6yshy0/+SfNOnN79c+z2kFwY8fP378/KtJjLWkPNVPoIlxPSmsU+SxlopPdCRPdCJP60Se6lie1HLCOsEnJjqBrpWEDPDjGkqMLfi1koiNNMWCrxGr50skpnWU+K4/FHiDl8waips2vIPERP8h8AVfRXFTIyDAIsGNQAzgR1UUHwG83cUSdMFNDkZIGmqp2KiCJIC36yhR42OJKfywgqRhlUgjKIuEhmWTC/jyHH54WkcJjuCjgzKSBpU5vKOEhiU38NffZJKB/cwJFK49g+9b8LFBhUAlNgksmVV2+BtGLhU0sihoZAntfhYHjEzOE/jjEoodW/CMEvhy8B5JiDP4MrHKJIG9gb+kBMCLvRKK9m14JgksDVzAw5wvhJ8XBY204gr+aBdF+yUCAowS2BU8BJaVAd6VxAy+VyK0bBLYNTwVMDI/XQg4SohdNRXpqki04dkk8FLwLkfIUWIGf7RLaNkk8NLwzEvMsNgUvnMGnk0CS4OSN1/YpSUaSg7gw50iErsqEbt/CVwsgcWeR/BLSzTSZON9/le4U8SRrkqgjBLew7uWoPAFEm7vkEhHtcomsTp4ZolGmtxqFsiDQ4AvnpZJYvXwjhIUPk/hw+0iLaMEFjtXBH+hhA3f2qajYwswSFw9vB0476lEI01uvtu04OHp0zfgLAGnU6StMv+CrCTBRloJvFbQva/PrNE52wUS4TYH8Hau7T1SqEBrm0mCnk68wNvZ+Ly1d//bc0cJuHfnw+OXAo8Jfdp6tVDisEhCzcKBwHNCH5+cL9HaIaHmJt/wdkLNwp8S6wRv5/bb/Iu7X55iKFzPbvjx48fPf5HfHS4yIZmrWTYAAAAASUVORK5CYII=",!1!==s&&i.classList.add("perfomans_img_activ"),c.append(i);const o=document.createElement("div");o.classList.add("description_box");const l=document.createElement("p");l.classList.add("description_lit"),l.textContent=n;const m=document.createElement("p");m.classList.add("description_max"),m.textContent=a,o.append(l),o.append(m);const r=document.createElement("p");r.classList.add("tikket_data"),r.textContent=this.time();const A=document.createElement("button");A.classList.add("tikket_edit");const p=document.createElement("img");p.classList.add("edit_img"),p.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAADzElEQVR4nO2dvWsUQRiHHyOIhWC1m1jY2kRUFPyABEUlfiE2BoyCtdqLaGklIoj4D1hLKi39A/y20EiMX42gxsrviKiRgXdhGPY2u3e7t5vs74ElMHc3N9zDO++8c7MXEEIIIYQQQgghhBBCCCGEEELUxgrgHPAY+Ax8BZ4Al4FN9Q2rnQwCj4D5Dtc/4Dawru6BtkXGc/vgZ4B9wEpgDbATuAZ8s8d/AKfrHnBbZDwFog7Pc+03vIi5Cgz0eaytkDFlH/CzDBk+x4FfnhRRgQx37Srw2j2elFNlDajNDAaRcQZ4DwwX6GPCyylK9CXJeO5NU8e6kJLklFu9DKjNDHoy3qYIKColBr7bknhjRWNuVQI/VoKU69anKx5FFzL+5hAwYW3rc/S90/p1Fb3oQkbaErcXKautzy95BtN2BoNpatj+lilllfXn9r5EF0XfCa/2KEPKfuvLbUiKgjLcHtUscCSjQu8k5W7K+0S29+X6OdtpMG0nXkDGDu950wWkhPtWke19udc/tK170aUMxzZre1VACtb/uJeLpux9RQkyDtjriiT6o14OkoycMuKcMvzXz+SQ4toVGRXLwHZ6Z3NISb43UWT0QcaujGkvsr0vyahYhuNB8F3IeFCn+MWkIqNiGXSIFn8VlWy3SEbF09RUxtSFRYZkLIC/RHVF3ZC1jwEfge3ec7cAH4DDQR+j9sHv9tpGgja/6Ju20yciQDIaRKzIaA6xZDSHWDKaQywZzSGWjMUpY7OWttUSSUZziIJiTJGxBGWMqgKXjEWNImOJyRjpYppK3kdIRjNRZDQIyWgQktEgJKNBDNjJ8DzfgW+1toMLfN+dtH3y2sITiDre2YEx71hNsuzU0rZGJk3GnP19qcioDxcNv+3a4B3feeFNKZqm+sh5E+CiJO1M1SHljP4m8zf24bucQYoUd53MkcCxm2KUwEtI5m8XuPvIP4g2krI3FaK9qR6TuZu20vAjJbkraTZlaesf+dTStoRknrW7Gk5f48HjmqZK4kKQzLPIc4420hZ69yzzbqT0k3m3UiLJqC6ZF5USSUb1yTyLOKhTtDfVp2SexQbgZ3BbmTYKe6zM5wr+huGATXWTJjOR4XaJJaOEyvxih2o7ZMgkJne4zpuQSROkn2EtMZl3qrrdY3uBm0E0vAMuAWt7GYTITua+lCH7XfUkitz1B7hjBeFyfZjVJ/MBm77mgmh4Y+J0RqpPlXkSDa8VDfXw0oRcSVkpKRpq4H7wrx20UqoZVyvcs1/TUW4QQgghhBBCCCGEEEIIIYQQgkXCf6A4hh0RQg+HAAAAAElFTkSuQmCC",A.append(p);const k=document.createElement("button");k.classList.add("tikket_delete");const u=document.createElement("img");u.classList.add("delete_img"),u.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAE4AAABOCAYAAACOqiAdAAAACXBIWXMAAAsTAAALEwEAmpwYAAABXElEQVR4nO3aUU4CMRRG4W4Enn3Ql/vfnSguDV2E4K40uIkxDZgYIoN02iZtz5fM8505AWamNAQAAAAAAAAAAAD0x8yeJb2b2au7r2rNlbSOMyXt4zmEBqNNv46Du9+XnhtnxFlns59CKyTtz06+eLwL0eKxC62w41dlqhVvJlo8tqEV7r6auZCs8a5EO9T8fc1C0p2kjwsX9CXpIccMM/ssOaO7eOo1Wsl43UcrEW+YaDnjDRctR7xhoy2JN3y0lHhES4hHtMSn/lpvHz1+8qYhbwQF4hEtIR7R/nLlRkC4xGjEWxCNeD94HEnwn4fbGouhTdENL+zEO0l5jRo+nhYsDQ0bTxnW04aLp4yLkMPEU4GV2+7jqeByd7fxVOE/gu7iSVqzBSKBsemm/W1eZvYWWiFpUzPaXDx3fwwt0TFe/ORta261irPM7OU0e1NrLgAAAAAAAAAAAEI932zoEMkurAeRAAAAAElFTkSuQmCC",k.append(u),d.append(c),d.append(o),d.append(r),d.append(A),d.append(k),t.append(d),o.addEventListener("click",(()=>{o.closest(".tikket_box").classList.toggle("tikket_box_max")})),c.addEventListener("click",(()=>{i.classList.toggle("perfomans_img_activ"),i.classList.contains("perfomans_img_activ")?this.editTikket(e,s=!0,r.value,l.value,m.value):this.editTikket(e,s=!1,r.value,l.value,m.value)})),A.addEventListener("click",(()=>{this.modalEditTikket(e,s=!1,r.value)})),k.addEventListener("click",(()=>{const t=d.dataset.id;this.modalDeleteTikket(t,d)}))}modalNewTikket(t){const e=document.createElement("form");e.classList.add("add_new_tikket");const n=document.createElement("h3");n.classList.add("newTikket_title"),n.textContent="Добавить тиккет",e.append(n);const a=document.createElement("form");a.classList.add("newTikket_form");const s=document.createElement("span");s.classList.add("description_input"),s.textContent="Краткое описание",a.append(s);const d=document.createElement("textarea");d.classList.add("input_lit_description"),d.rows="2",a.append(d);const c=document.createElement("span");c.classList.add("description_input"),c.textContent="Подробное описание",a.append(c);const i=document.createElement("textarea");i.classList.add("input_max_description"),i.rows="4",a.append(i);const o=document.createElement("div");o.classList.add("input_buttons");const l=document.createElement("button");l.classList.add("cancel_btn"),l.textContent="Отмена",o.append(l);const m=document.createElement("button");m.classList.add("new_form_btn"),m.textContent="Ок",o.append(m),a.append(o),e.append(a),l.addEventListener("click",(()=>{e.remove()})),m.addEventListener("click",(()=>{this.loadNewTikket(d.value,i.value)})),t.append(e)}modalEditTikket(t,e,n){const a=document.createElement("div");a.classList.add("this_edit_tikket");const s=document.createElement("h3");s.classList.add("newTikket_title"),s.textContent="Редактировать тиккет",a.append(s);const d=document.createElement("form");d.classList.add("newTikket_form");const c=document.createElement("span");c.classList.add("description_input"),c.textContent="Краткое описание",d.append(c);const i=document.createElement("textarea");i.classList.add("input_lit_description"),i.rows="2",d.append(i);const o=document.createElement("span");o.classList.add("description_input"),o.textContent="Подробное описание",d.append(o);const l=document.createElement("textarea");l.classList.add("input_max_description"),l.rows="4",d.append(l);const m=document.createElement("div");m.classList.add("input_buttons");const r=document.createElement("button");r.classList.add("cancel_btn"),r.textContent="Отмена",m.append(r);const A=document.createElement("button");A.classList.add("add_form_btn"),A.textContent="Ок",m.append(A),d.append(m),a.append(d),r.addEventListener("click",(()=>{a.remove()})),A.addEventListener("click",(()=>{this.editTikket(t,e,n,i.value,l.value)})),document.body.append(a)}modalDeleteTikket(t,e){const n=document.createElement("div");n.classList.add("this_edit_tikket");const a=document.createElement("h3");a.classList.add("newTikket_title"),a.textContent="Удалить тиккет?",n.append(a);const s=document.createElement("p");s.classList.add("textDeleteTikket"),s.textContent="Вы точно хотите удалить тиккет? это действие необратимое!!!",n.append(s);const d=document.createElement("div");d.classList.add("input_buttons");const c=document.createElement("button");c.classList.add("cancel_btn"),c.textContent="Отмена",d.append(c);const i=document.createElement("button");i.classList.add("del_form_btn"),i.textContent="Ок",d.append(i),n.append(d),document.body.append(n),c.addEventListener("click",(()=>{n.remove()})),i.addEventListener("click",(()=>{this.deleteTikket(t,n,e)}))}time(){const t=new Date,e=t.getFullYear(),n=t.getMonth();return`${t.getDate()}-${n+1}-${e} ${t.getHours()}:${t.getMinutes()}`}loadNewTikket(t,e){const n={name:t,description:e,status:!1};fetch("http://localhost:7070/?method=createTicket",{method:"POST",body:JSON.stringify(n)})}deleteTikket(t,e,n){fetch(`http://localhost:7070/?method=deleteById&id=${t}`,{method:"GET"}),e.remove(),n.remove()}addTikkets(){const t=document.body.querySelector(".add_tikket"),e=document.body;t.addEventListener("click",(()=>{this.modalNewTikket(e)}))}async editTikket(t,e,n,a,s){const d={id:t,name:a,description:s,status:e,created:n};await fetch(`http://localhost:7070/?method=updateById&id=${t}`,{method:"POST",body:JSON.stringify(d)})}}(t).init()})();